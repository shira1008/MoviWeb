<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>User movies</title>
  </head>
  <body>
    <h1>Favorite Movies of {{user_name}}</h1>
    <div>
      <ul class="movies_list">
        {% for movie in movies %}
        <li class="movie">
          <h3>{{ movie["name"] }}</h3>
          <p>Director: {{ movie["director"] }}</p>
          <p>Year: {{ movie["year"] }}</p>
          <p>Rating: {{ movie["rating"] }}</p>
          <img src="{{ movie['url'] }}" alt="{{ movie['name'] }}" />
          <!-- getting the data as a placeholder using GET -->
          <form
            action="{{ url_for('update_movie', user_id=user_id, movie_id=movie['id']) }}"
            method="GET"
          >
            <input type="submit" value="Edit Movie" />
          </form>

          <form
            action="{{ url_for('delete_movie', user_id=user_id, movie_id=movie['id']) }}"
            method="POST"
          >
            <input type="submit" value="Del Movie" />
          </form>
        </li>
        {% endfor %}
      </ul>
    </div>
    <h1>Add Movie</h1>

    <form action="{{ url_for('add_movie', user_id=user_id) }}" method="post">
      <div>
        <label for="movie_name">Movie Name:</label>
        <input type="text" id="movie_name" name="movie_name" required />
      </div>
      <div>
        <button type="submit" class="btn">Add Movie</button>
      </div>
    </form>
    <a href="{{ url_for('list_users') }}">Back to users</a>
  </body>
</html>
